<% layout("/layouts/boilerplate")%>

<!-- Force auth-page marker immediately so page-scoped CSS can override global styles -->
<script>try{document.documentElement.classList.add('auth-page'); document.body.classList.add('auth-page');}catch(e){}
</script>

<style>
  /* Strong inline overrides to ensure the auth pages use a light background */
  html.auth-page, body.auth-page {
    background: linear-gradient(135deg, #f7fbfc 0%, #ffffff 100%) !important;
    color: #111 !important;
    min-height: 100vh !important;
  }
  html.auth-page .main-content, body.auth-page .main-content {
    background: transparent !important;
    padding-top: 0 !important;
  }
  html.auth-page .container, body.auth-page .container {
    background: transparent !important;
  }
  html.auth-page .contact-hero,
  html.auth-page .page-hero,
  html.auth-page .hero,
  html.auth-page .auth-hero-bg,
  body.auth-page .contact-hero,
  body.auth-page .page-hero,
  body.auth-page .hero,
  body.auth-page .auth-hero-bg {
    background: transparent !important;
    box-shadow: none !important;
  }
  /* Ensure the centered card remains visually prominent */
  .login-hero { background: transparent !important; }
  .login-card { background: #fff !important; }

  /* Lightweight page-scoped styles to match login look */
  .login-hero { min-height: calc(100vh - 120px); display: flex; align-items: center; justify-content: center; }
  .login-card { max-width: 520px; width: 96%; padding: 26px; border-radius: 12px; box-shadow: 0 10px 30px rgba(18, 38, 63, 0.08); background: #ffffff; }
  .login-hero h1 { font-weight:700; color: #222; margin-bottom: 6px; }
  .lead-muted { color: #6b7280; font-size: 0.95rem; margin-bottom: 18px; }
  .input-group .form-control { border-left: 0; }
  .input-group-text { background: #f3f4f6; border-right: 0; }
  .form-control { border-radius: 8px; }
  .btn-primary { background: #ef476f; border-color: #ef476f; }
  .btn-primary:hover { background: #e43f67; border-color: #e43f67; }
  .password-toggle { background: transparent; border: 0; padding: 6px 8px; cursor: pointer; }
  .password-toggle svg { width: 20px; height: 20px; fill: #6b7280; }
</style>

<div class="login-hero">
   <div class="login-card">
      <h1 class="text-center">Create an account</h1>
      <p class="text-center lead-muted">Join HomyHive and start hosting or booking</p>

      <form action="/signup" method="POST" class="needs-validation" novalidate>
         <div class="row g-3">
            <div class="col-12">
               <label for="username" class="form-label">Username</label>
               <div class="input-group">
                  <span class="input-group-text" id="user-addon">
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                  </span>
                  <input name="username" id="username" type="text" class="form-control" placeholder="Choose a username" aria-label="Username" aria-describedby="user-addon" required>
                  <div class="invalid-feedback">Please choose a username.</div>
               </div>
            </div>

            <div class="col-12">
               <label for="email" class="form-label">Email</label>
               <div class="input-group">
                  <span class="input-group-text" id="email-addon">@</span>
                  <input name="email" id="email" type="email" class="form-control" placeholder="you@example.com" aria-label="Email" aria-describedby="email-addon" required>
                  <div class="invalid-feedback">Please provide a valid email.</div>
               </div>
            </div>

            <div class="col-12">
               <label for="password" class="form-label">Password</label>
               <div class="input-group">
                  <span class="input-group-text" id="lock-addon">
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                  </span>
                  <input name="password" id="password" type="password" class="form-control" placeholder="Create a password" aria-label="Password" aria-describedby="lock-addon" required>
                  <button type="button" id="togglePassword" class="password-toggle" aria-label="Toggle password visibility">
                     <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                  </button>
                  <div class="invalid-feedback">Please provide a password.</div>
               </div>
            </div>

            <div class="col-12">
               <label for="confirmPassword" class="form-label">Confirm Password</label>
               <div class="input-group">
                  <span class="input-group-text" id="confirm-addon">
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"></path></svg>
                  </span>
                  <input name="confirmPassword" id="confirmPassword" type="password" class="form-control" placeholder="Repeat your password" aria-label="Confirm Password" aria-describedby="confirm-addon" required>
                  <button type="button" id="toggleConfirm" class="password-toggle" aria-label="Toggle confirm password visibility">
                     <svg id="eyeIcon2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                  </button>
                  <div class="invalid-feedback">Please confirm your password.</div>
               </div>
            </div>

            <div class="col-12">
               <div class="d-grid">
                  <button class="btn btn-primary btn-lg" type="submit">Create account</button>
               </div>
            </div>
         </div>
      </form>
   </div>
</div>

<script>
   document.addEventListener('DOMContentLoaded', function () {
      // mark document as auth page so global CSS can override site hero/bg
      try { document.documentElement.classList.add('auth-page'); } catch(e){}
      const toggle = document.getElementById('togglePassword');
      const password = document.getElementById('password');
      const eyeIcon = document.getElementById('eyeIcon');

      const toggle2 = document.getElementById('toggleConfirm');
      const confirm = document.getElementById('confirmPassword');
      const eyeIcon2 = document.getElementById('eyeIcon2');

      const eyeSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"></path><circle cx="12" cy="12" r="3"></circle></svg>';
      const eyeOffSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a20.84 20.84 0 0 1 5.06-5.94"></path><path d="M3 3l18 18"></path></svg>';

      toggle.addEventListener('click', function () {
         const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
         password.setAttribute('type', type);
         eyeIcon.outerHTML = type === 'password' ? eyeSVG : eyeOffSVG;
      });

      toggle2.addEventListener('click', function () {
         const type = confirm.getAttribute('type') === 'password' ? 'text' : 'password';
         confirm.setAttribute('type', type);
         eyeIcon2.outerHTML = type === 'password' ? eyeSVG : eyeOffSVG;
      });
   });
</script>